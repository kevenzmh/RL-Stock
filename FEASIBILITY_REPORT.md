# è‚¡ç¥¨é¢„æµ‹é¡¹ç›®å®æˆ˜å¯è¡Œæ€§åˆ†ææŠ¥å‘Š

## é¡¹ç›®æ¦‚è§ˆ
- **é¡¹ç›®è·¯å¾„**: D:\PycharmProjects\RL-Stock
- **ä¸»è¦ç®—æ³•**: PPO2 (Proximal Policy Optimization)
- **ç¯å¢ƒ**: Condaè™šæ‹Ÿç¯å¢ƒ rl-stock (Python 3.6.13)
- **æ•°æ®æ¥æº**: baostockè¯åˆ¸æ•°æ®å¹³å°

## 1. é¡¹ç›®ç»“æ„æ£€æŸ¥ âœ…

### æ ¸å¿ƒæ–‡ä»¶
- âœ… `main.py` - æ ‡å‡†è®­ç»ƒè„šæœ¬
- âœ… `main_improved.py` - æ”¹è¿›ç‰ˆè®­ç»ƒè„šæœ¬
- âœ… `get_stock_data.py` - æ•°æ®è·å–è„šæœ¬
- âœ… `requirements.txt` - ä¾èµ–é…ç½®

### ç›®å½•ç»“æ„
- âœ… `stockdata/train/` - è®­ç»ƒæ•°æ®é›† (5668ä¸ªæ–‡ä»¶)
- âœ… `stockdata/test/` - æµ‹è¯•æ•°æ®é›† (5668ä¸ªæ–‡ä»¶)
- âœ… `rlenv/` - å¼ºåŒ–å­¦ä¹ ç¯å¢ƒå®šä¹‰
- âœ… `models/` - æ¨¡å‹ä¿å­˜ç›®å½•
- âœ… `log/` - è®­ç»ƒæ—¥å¿—ç›®å½•

## 2. ä¾èµ–ç¯å¢ƒæ£€æŸ¥ âœ…

### å…³é”®åº“ç‰ˆæœ¬
- TensorFlow: 1.15.2 (GPUæ”¯æŒ,ä½†CUDAåº“ç¼ºå¤±,ä½¿ç”¨CPUè®­ç»ƒ)
- stable-baselines: 2.10.0
- gym: 0.17.1
- pandas: 1.0.3
- numpy: 1.18.2
- matplotlib: 3.2.1

### ç¯å¢ƒçŠ¶æ€
- âœ… æ‰€æœ‰ä¾èµ–å·²æ­£ç¡®å®‰è£…
- âš ï¸ GPUåº“ç¼ºå¤±,ä½¿ç”¨CPUè®­ç»ƒ(è®­ç»ƒé€Ÿåº¦è¾ƒæ…¢)
- âœ… ç¯å¢ƒåŠŸèƒ½æµ‹è¯•é€šè¿‡

## 3. æ•°æ®è´¨é‡æ£€æŸ¥ âœ…

### æ•°æ®è§„æ¨¡
- è®­ç»ƒé›†: 5668ä¸ªè‚¡ç¥¨æ•°æ®æ–‡ä»¶
- æ¯ä¸ªæ–‡ä»¶: æ•°åƒæ¡å†å²è®°å½•
- æ—¶é—´è·¨åº¦: 1990å¹´ä»£ è‡³ 2025-01-17

### æ•°æ®ç‰¹å¾ (17åˆ—)
- `date` - äº¤æ˜“æ—¥æœŸ
- `code` - è‚¡ç¥¨ä»£ç 
- `open, high, low, close` - OHLCä»·æ ¼
- `volume, amount` - æˆäº¤é‡å’Œé‡‘é¢
- `pctChg` - æ¶¨è·Œå¹…
- `peTTM, pbMRQ, psTTM, pcfNcfTTM` - ä¼°å€¼æŒ‡æ ‡
- `tradestatus` - äº¤æ˜“çŠ¶æ€
- `isST` - ç‰¹æ®Šå¤„ç†æ ‡è¯†

### æ•°æ®é—®é¢˜
- âš ï¸ å­˜åœ¨ç¼ºå¤±å€¼(çº¦0.8%),å·²é€šè¿‡å‰å‘å¡«å……å¤„ç†
- âœ… æ•°æ®æ—¶é—´èŒƒå›´å……è¶³
- âœ… ç‰¹å¾ç»´åº¦åˆç†

## 4. æ¨¡å‹è®­ç»ƒæµ‹è¯• âœ…

### å¿«é€Ÿæµ‹è¯•ç»“æœ (æ‹›å•†é“¶è¡Œ sh.600036)

#### è®­ç»ƒé…ç½®
- è®­ç»ƒæ•°æ®: 5534æ¡è®°å½• (2002-2025)
- è®­ç»ƒæ­¥æ•°: 2000æ­¥ (å¿«é€Ÿæµ‹è¯•)
- è®­ç»ƒæ—¶é—´: ~1åˆ†é’Ÿ
- åˆå§‹èµ„é‡‘: 10,000å…ƒ

#### æµ‹è¯•ç»“æœ
- æµ‹è¯•å‘¨æœŸ: 1245å¤© (2019-12-02 è‡³ 2025-01-17)
- **æœ€ç»ˆæ”¶ç›Š: +277.75å…ƒ (+2.78%)**
- æœ€å¤§æ”¶ç›Š: +4526.90å…ƒ
- æœ€å°å›æ’¤: -2593.77å…ƒ
- æ³¢åŠ¨è¾ƒå¤§,é£é™©è¾ƒé«˜

### è®­ç»ƒè¿‡ç¨‹è§‚å¯Ÿ
- âœ… æ¨¡å‹èƒ½å¤Ÿæ­£å¸¸è®­ç»ƒå’Œæ”¶æ•›
- âœ… ç¯å¢ƒäº¤äº’æ­£å¸¸
- âš ï¸ value_lossæ³¢åŠ¨è¾ƒå¤§,éœ€è¦æ›´é•¿è®­ç»ƒæ—¶é—´
- âš ï¸ å‡ºç°é™¤é›¶è­¦å‘Š,éœ€è¦ä¿®å¤ä»£ç 

## 5. å®æˆ˜å¯è¡Œæ€§è¯„ä¼°

### âœ… é¡¹ç›®ä¼˜åŠ¿

1. **ç®—æ³•è®¾è®¡åˆç†**
   - PPOç®—æ³•é€‚åˆè¿ç»­åŠ¨ä½œç©ºé—´
   - ç¯å¢ƒè®¾è®¡ç¬¦åˆè‚¡ç¥¨äº¤æ˜“ç‰¹ç‚¹
   - å¥–åŠ±å‡½æ•°ç›´æ¥ä¼˜åŒ–æ”¶ç›Šç›®æ ‡

2. **æ•°æ®è´¨é‡è‰¯å¥½**
   - æ•°æ®æ¥æºæ­£è§„(baostock)
   - è¦†ç›–5000+è‚¡ç¥¨
   - æ—¶é—´è·¨åº¦é•¿è¾¾30+å¹´
   - ç‰¹å¾ç»´åº¦ä¸°å¯Œ(17ä¸ªç‰¹å¾)

3. **ä»£ç ç»“æ„æ¸…æ™°**
   - ç¯å¢ƒå®šä¹‰æ ‡å‡†(OpenAI Gym)
   - æœ‰è®­ç»ƒ/æµ‹è¯•é›†åˆ’åˆ†
   - ä»£ç å¯è¯»æ€§å¥½

### âš ï¸ é‡å¤§å±€é™å’Œé£é™©

#### æŠ€æœ¯å±‚é¢

1. **æ•°æ®é—®é¢˜**
   - âŒ æ•°æ®å­˜åœ¨ç¼ºå¤±å€¼
   - âŒ READMEè¯´è®­ç»ƒæ•°æ®åˆ°2019å¹´,ä½†å®é™…æ•°æ®å·²æ›´æ–°åˆ°2025å¹´,å­˜åœ¨ä¿¡æ¯ä¸ä¸€è‡´
   - âŒ æœªè€ƒè™‘æ•°æ®çš„å‰è§†åå·®
   - âŒ ç¼ºå°‘æ•°æ®æ ‡å‡†åŒ–/å½’ä¸€åŒ–éªŒè¯

2. **æ¨¡å‹è®¾è®¡ç¼ºé™·**
   - âŒ **æœªè€ƒè™‘äº¤æ˜“æˆæœ¬**(æ‰‹ç»­è´¹çº¦0.03%,å°èŠ±ç¨0.1%)
   - âŒ **æœªè€ƒè™‘æ»‘ç‚¹**
   - âŒ **æœªè€ƒè™‘æµåŠ¨æ€§é™åˆ¶**(å¤§é¢äº¤æ˜“å½±å“ä»·æ ¼)
   - âŒ å¥–åŠ±å‡½æ•°è¿‡äºç®€å•(åªçœ‹æ”¶ç›Š,ä¸è€ƒè™‘é£é™©)
   - âŒ ä»£ç å­˜åœ¨é™¤é›¶bug(éœ€ä¿®å¤)

3. **è®­ç»ƒä¸è¶³**
   - âŒ å¿«é€Ÿæµ‹è¯•ä»…2000æ­¥,è¿œä¸å¤Ÿ
   - âŒ READMEå»ºè®®10000æ­¥,å®é™…åº”è¯¥éœ€è¦10ä¸‡-100ä¸‡æ­¥
   - âŒ æœªè¿›è¡Œå……åˆ†çš„è¶…å‚æ•°è°ƒä¼˜
   - âŒ ç¼ºå°‘æ¨¡å‹é²æ£’æ€§éªŒè¯

4. **è¯„ä¼°æ–¹æ³•é—®é¢˜**
   - âŒ **å•ä¸€æ—¶æ®µæµ‹è¯•ä¸å¤Ÿ**(2019-2025)
   - âŒ æœªè¿›è¡Œæ»šåŠ¨çª—å£æµ‹è¯•
   - âŒ æœªæµ‹è¯•ä¸åŒå¸‚åœºç¯å¢ƒ(ç‰›å¸‚/ç†Šå¸‚/éœ‡è¡)
   - âŒ ç¼ºå°‘é£é™©æŒ‡æ ‡(å¤æ™®æ¯”ç‡ã€æœ€å¤§å›æ’¤ç­‰)

#### å®æˆ˜é£é™©

5. **å¸‚åœºé€‚åº”æ€§**
   - âŒ å†å²æ•°æ®å›æµ‹ â‰  æœªæ¥è¡¨ç°
   - âŒ å¸‚åœºåˆ¶åº¦å˜åŒ–(T+1ã€æ¶¨è·Œåœé™åˆ¶)
   - âŒ æ”¿ç­–å˜åŒ–å½±å“(ç›‘ç®¡ã€èèµ„èåˆ¸ç­‰)
   - âŒ é»‘å¤©é¹…äº‹ä»¶(2020ç–«æƒ…ã€2015è‚¡ç¾ç­‰)

6. **é£é™©æ§åˆ¶ç¼ºå¤±**
   - âŒ **æ²¡æœ‰æ­¢æŸæœºåˆ¶**
   - âŒ **æ²¡æœ‰ä»“ä½ç®¡ç†**
   - âŒ **æ²¡æœ‰é£é™©é¢„ç®—**
   - âŒ æ²¡æœ‰å¯¹å†²ç­–ç•¥

7. **å®ç›˜æŒ‘æˆ˜**
   - âŒ å¿ƒç†å› ç´ (ææƒ§ã€è´ªå©ª)
   - âŒ å®æ—¶æ•°æ®è·å–å»¶è¿Ÿ
   - âŒ è®¢å•æ‰§è¡Œå»¶è¿Ÿå’Œå¤±è´¥
   - âŒ ç³»ç»Ÿæ•…éšœé£é™©

## 6. æ”¹è¿›å»ºè®®

### çŸ­æœŸæ”¹è¿› (å¿…é¡»å®Œæˆ)

1. **ä¿®å¤ä»£ç bug**
   ```python
   # ä¿®å¤ StockTradingEnv0.py ç¬¬79è¡Œçš„é™¤é›¶é”™è¯¯
   if self.shares_held + shares_bought > 0:
       self.cost_basis = (prev_cost + additional_cost) / (self.shares_held + shares_bought)
   ```

2. **å¢åŠ äº¤æ˜“æˆæœ¬æ¨¡æ‹Ÿ**
   ```python
   # æ‰‹ç»­è´¹ 0.03%, å°èŠ±ç¨ 0.1% (å–å‡ºæ—¶)
   buy_cost = shares_bought * current_price * 1.0003
   sell_revenue = shares_sold * current_price * 0.999  # 0.1% + 0.03% + å…¶ä»–è´¹ç”¨
   ```

3. **å»¶é•¿è®­ç»ƒæ—¶é—´**
   - è‡³å°‘è®­ç»ƒ10ä¸‡æ­¥(åŸä»£ç 1ä¸‡æ­¥)
   - ä½¿ç”¨GPUåŠ é€Ÿ(éœ€å®‰è£…CUDA 10.0åº“)

4. **æ·»åŠ é£é™©æ§åˆ¶**
   - å•ç¬”æœ€å¤§æŸå¤±é™åˆ¶(å¦‚2%)
   - æ€»ä»“ä½é™åˆ¶(å¦‚70%)
   - è¿ç»­äºæŸååœæ­¢äº¤æ˜“

### ä¸­æœŸæ”¹è¿› (å¼ºçƒˆå»ºè®®)

5. **æ”¹è¿›å¥–åŠ±å‡½æ•°**
   ```python
   # è€ƒè™‘é£é™©è°ƒæ•´åçš„æ”¶ç›Š
   sharpe_ratio = (return - risk_free_rate) / std_return
   reward = net_worth_change - penalty * volatility
   ```

6. **å¢åŠ æŠ€æœ¯æŒ‡æ ‡ç‰¹å¾**
   - ç§»åŠ¨å¹³å‡çº¿(MA5, MA10, MA20, MA60)
   - MACD, RSI, KDJ
   - å¸ƒæ—å¸¦
   - æˆäº¤é‡æŒ‡æ ‡

7. **å¢å¼ºè¯„ä¼°æ–¹æ³•**
   - æ»šåŠ¨çª—å£æµ‹è¯•(Walk-forward)
   - ä¸åŒå¸‚åœºç¯å¢ƒæµ‹è¯•
   - Monte Carloæ¨¡æ‹Ÿ
   - è®¡ç®—å¤æ™®æ¯”ç‡ã€æœ€å¤§å›æ’¤ã€å¡ç›æ¯”ç‡

8. **æ›´æ–°æ•°æ®å¤„ç†**
   - æ•°æ®æ ‡å‡†åŒ–éªŒè¯
   - å¼‚å¸¸å€¼å¤„ç†
   - ç¼ºå¤±å€¼æ›´å¥½çš„å¤„ç†æ–¹æ³•

### é•¿æœŸæ”¹è¿› (ç ”ç©¶æ–¹å‘)

9. **æ¨¡å‹å‡çº§**
   - å°è¯•SACã€TD3ç­‰æ›´å…ˆè¿›çš„ç®—æ³•
   - å¤šæ™ºèƒ½ä½“åä½œ
   - åŠ å…¥æ³¨æ„åŠ›æœºåˆ¶
   - è€ƒè™‘åºåˆ—ä¾èµ–(LSTM+RL)

10. **å¸‚åœºå¾®è§‚ç»“æ„**
    - è®¢å•ç°¿æ•°æ®
    - é«˜é¢‘äº¤æ˜“æ•°æ®
    - å¸‚åœºæ·±åº¦
    - å¤§å•è·Ÿè¸ª

11. **åŸºæœ¬é¢åˆ†æ**
    - è´¢åŠ¡æŠ¥è¡¨æ•°æ®
    - æ–°é—»æƒ…æ„Ÿåˆ†æ
    - è¡Œä¸šæ¿å—åˆ†æ
    - å®è§‚ç»æµæŒ‡æ ‡

## 7. å®æˆ˜è·¯çº¿å›¾

### é˜¶æ®µ0: ä»£ç å®Œå–„ (1å‘¨)
- [ ] ä¿®å¤æ‰€æœ‰bug
- [ ] æ·»åŠ äº¤æ˜“æˆæœ¬
- [ ] æ”¹è¿›æ—¥å¿—è®°å½•
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•

### é˜¶æ®µ1: å……åˆ†è®­ç»ƒ (2-4å‘¨)
- [ ] è®­ç»ƒ10-50ä¸‡æ­¥
- [ ] å¤šä¸ªè‚¡ç¥¨éªŒè¯
- [ ] ä¸åŒè¶…å‚æ•°æµ‹è¯•
- [ ] ä¿å­˜æœ€ä½³æ¨¡å‹

### é˜¶æ®µ2: ä¸¥æ ¼å›æµ‹ (4-8å‘¨)
- [ ] 2015-2020 (åŒ…å«è‚¡ç¾)
- [ ] 2020-2023 (åŒ…å«ç–«æƒ…)
- [ ] 2023-2025 (æœ€è¿‘å¸‚åœº)
- [ ] ç‰›å¸‚/ç†Šå¸‚/éœ‡è¡å¸‚åˆ†åˆ«æµ‹è¯•
- [ ] è®¡ç®—æ‰€æœ‰é£é™©æŒ‡æ ‡

### é˜¶æ®µ3: æ¨¡æ‹Ÿç›˜æµ‹è¯• (3-6ä¸ªæœˆ)
- [ ] æ³¨å†Œæ¨¡æ‹Ÿäº¤æ˜“è´¦æˆ·
- [ ] å®æ—¶æ•°æ®æ¥å…¥
- [ ] å®ç›˜æ¨¡æ‹Ÿè¿è¡Œ
- [ ] è®°å½•æ‰€æœ‰äº¤æ˜“
- [ ] åˆ†æå¤±è´¥æ¡ˆä¾‹

### é˜¶æ®µ4: å°èµ„é‡‘å®ç›˜ (6-12ä¸ªæœˆ)
- [ ] **ä»…ç”¨å¯æ‰¿å—æŸå¤±çš„èµ„é‡‘**(å¦‚5000-10000å…ƒ)
- [ ] è®¾ç½®ä¸¥æ ¼æ­¢æŸ(å•æ—¥-2%, æ€»-10%)
- [ ] æ¯æ—¥äººå·¥å®¡æ ¸
- [ ] ä¿æŒäº¤æ˜“æ—¥å¿—
- [ ] å®šæœŸè¯„ä¼°å’Œè°ƒæ•´

## 8. æœ€ç»ˆç»“è®º

### âš ï¸ å½“å‰çŠ¶æ€: **ä¸å»ºè®®ç›´æ¥å®æˆ˜**

#### åŸå› :
1. âŒ ä»£ç å­˜åœ¨bug
2. âŒ è®­ç»ƒä¸¥é‡ä¸è¶³(2000æ­¥ vs åº”éœ€100000+æ­¥)
3. âŒ ç¼ºå°‘äº¤æ˜“æˆæœ¬è€ƒè™‘
4. âŒ æ— é£é™©æ§åˆ¶æœºåˆ¶
5. âŒ å›æµ‹ä¸å¤Ÿå……åˆ†
6. âŒ æœªç»æ¨¡æ‹Ÿç›˜éªŒè¯

#### é£é™©ç­‰çº§: ğŸ”´ **é«˜é£é™©**
- ç›´æ¥ä½¿ç”¨å¯èƒ½å¯¼è‡´äºæŸ
- æµ‹è¯•ç»“æœ(+2.78%)ä¸å…·å¤‡ç»Ÿè®¡æ˜¾è‘—æ€§
- æœªè€ƒè™‘äº¤æ˜“æˆæœ¬åå¾ˆå¯èƒ½ä¸ºè´Ÿæ”¶ç›Š

### âœ… é¡¹ç›®ä»·å€¼

è¿™æ˜¯ä¸€ä¸ª**ä¼˜ç§€çš„å­¦ä¹ é¡¹ç›®**:
- âœ… ä»£ç ç»“æ„æ¸…æ™°
- âœ… ç®—æ³•é€‰æ‹©åˆç†
- âœ… æ•°æ®æ¥æºå¯é 
- âœ… é€‚åˆå­¦ä¹ å¼ºåŒ–å­¦ä¹ åœ¨é‡åŒ–äº¤æ˜“ä¸­çš„åº”ç”¨

### ğŸ“‹ è¡ŒåŠ¨å»ºè®®

**å¦‚æœä½ åªæ˜¯å­¦ä¹ å’Œç ”ç©¶:**
- âœ… ç»§ç»­ä½¿ç”¨å’Œæ”¹è¿›è¿™ä¸ªé¡¹ç›®
- âœ… å°è¯•ä¸åŒçš„ç®—æ³•å’Œç­–ç•¥
- âœ… åˆ†äº«ç»éªŒå’Œæ”¹è¿›

**å¦‚æœä½ æƒ³å®æˆ˜äº¤æ˜“:**
1. âš ï¸ å®Œæˆæ‰€æœ‰"çŸ­æœŸæ”¹è¿›"å’Œ"ä¸­æœŸæ”¹è¿›"
2. âš ï¸ è¿›è¡Œè‡³å°‘6ä¸ªæœˆçš„æ¨¡æ‹Ÿç›˜æµ‹è¯•
3. âš ï¸ ä»…ç”¨å°é¢èµ„é‡‘æµ‹è¯•(5000-10000å…ƒ)
4. âš ï¸ è®¾ç½®ä¸¥æ ¼çš„æ­¢æŸå’Œé£é™©æ§åˆ¶
5. âš ï¸ **æ°¸è¿œä¸è¦æŠ•å…¥ä¸èƒ½æ‰¿å—æŸå¤±çš„èµ„é‡‘**
6. âš ï¸ **ç»“åˆäººå·¥åˆ¤æ–­,ä¸å®Œå…¨ä¾èµ–ç®—æ³•**

### ğŸ’¡ é‡è¦æé†’

> **"é‡åŒ–äº¤æ˜“çš„åœ£æ¯å¹¶ä¸å­˜åœ¨"**
> 
> - è¿‡å»çš„è¡¨ç°ä¸ä»£è¡¨æœªæ¥çš„ç»“æœ
> - æ‰€æœ‰ç­–ç•¥éƒ½æœ‰å¤±æ•ˆçš„æ—¶å€™
> - é£é™©ç®¡ç†æ¯”æ”¶ç›Šä¼˜åŒ–æ›´é‡è¦
> - å¸‚åœºæ˜¯åŠ¨æ€å˜åŒ–çš„,éœ€è¦æŒç»­è¿­ä»£

---

## é™„å½•: æµ‹è¯•æ–‡ä»¶æ¸…å•

ç”Ÿæˆçš„æµ‹è¯•æ–‡ä»¶:
1. `test_project.py` - é¡¹ç›®å®Œæ•´æ€§æµ‹è¯•
2. `test_env.py` - ç¯å¢ƒåŠŸèƒ½æµ‹è¯•
3. `quick_train_test.py` - å¿«é€Ÿè®­ç»ƒæµ‹è¯•
4. `FEASIBILITY_REPORT.md` - æœ¬æŠ¥å‘Š

ç”Ÿæˆçš„ç»“æœæ–‡ä»¶:
1. `models/quick_test_model.*` - æµ‹è¯•æ¨¡å‹
2. `img/quick_test_profit.png` - æ”¶ç›Šæ›²çº¿å›¾

---

**æŠ¥å‘Šæ—¥æœŸ**: 2026-01-20  
**æµ‹è¯•ç¯å¢ƒ**: Windows + Conda (rl-stock)  
**åˆ†æäººå‘˜**: AI Assistant (Claude)
